<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Middle School: Life Science</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/ArisEdu Project Folder/styles/main.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="theme_manager.js"></script>
  <script charset="UTF-8" src="scripts/global_translations.js?v=7.4"></script>
  <script src="scripts/spanish_translations.js?v=1.4"></script>
  <script src="scripts/hindi_translations.js?v=1.4"></script>
</head>
 <body class="dark-mode h-full">
<script src="scripts/taskbar.js"></script>
  <main class="main-container">
    <div class="logo-title-wrapper" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
      <h1 id="company-name" class="logo-font page-title" style="font-size: 3rem; margin-bottom: 0;">Middle School: Life Science</h1>
    </div>
    <div class="courses-container" style="min-height: 145rem;">

      <!-- Unit Grid -->
      <div style="position: absolute; inset: 0; transform: translateY(6rem); display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); pointer-events: none; opacity: 1; z-index: 0; gap: 1rem; padding: 0 1rem;">
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-1" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-1">
<a href="BiologyLessons/Unit1/Lesson1.1_Video.html" onclick="markLessonStarted('1', 1)">
    <rect id="u1-l1" stroke="none" x="3" y="29.250" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.1 Introduction to Biology')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="29.250" x2="21" y2="29.250" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Lesson1.2_Video.html" onclick="markLessonStarted('1', 2)">
    <rect id="u1-l2" stroke="none" x="3" y="25.500" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.2 The Science of Life')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="25.500" x2="21" y2="25.500" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Lesson1.3_Video.html" onclick="markLessonStarted('1', 3)">
    <rect id="u1-l3" stroke="none" x="3" y="21.750" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.3 The Nature of Science')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="21.750" x2="21" y2="21.750" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Lesson1.4_Video.html" onclick="markLessonStarted('1', 4)">
    <rect id="u1-l4" stroke="none" x="3" y="18.000" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.4 Characteristics of Life')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="18.000" x2="21" y2="18.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Lesson1.5_Video.html" onclick="markLessonStarted('1', 5)">
    <rect id="u1-l5" stroke="none" x="3" y="14.250" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.5 Levels of Biological Organization')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="14.250" x2="21" y2="14.250" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Lesson1.6_Video.html" onclick="markLessonStarted('1', 6)">
    <rect id="u1-l6" stroke="none" x="3" y="10.500" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.6 Branches of Biology')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="10.500" x2="21" y2="10.500" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Lesson1.7_Video.html" onclick="markLessonStarted('1', 7)">
    <rect id="u1-l7" stroke="none" x="3" y="6.750" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '1.7 Careers in Biology')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="6.750" x2="21" y2="6.750" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit1/Unit1_Test_Practice.html" onclick="markLessonStarted('1', 8)">
    <rect id="u1-l8" stroke="none" x="3" y="3.000" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 1 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 1</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-2" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-2">
<a href="BiologyLessons/Unit2/Lesson2.1_Video.html" onclick="markLessonStarted('2', 1)">
    <rect id="u2-l1" stroke="none" x="3" y="29.250" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.1 Organisms and Their Relationships')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="29.250" x2="21" y2="29.250" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Lesson2.2_Video.html" onclick="markLessonStarted('2', 2)">
    <rect id="u2-l2" stroke="none" x="3" y="25.500" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.2 Flow of Energy in an Ecosystem')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="25.500" x2="21" y2="25.500" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Lesson2.3_Video.html" onclick="markLessonStarted('2', 3)">
    <rect id="u2-l3" stroke="none" x="3" y="21.750" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.3 Cycling of Matter')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="21.750" x2="21" y2="21.750" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Lesson2.4_Video.html" onclick="markLessonStarted('2', 4)">
    <rect id="u2-l4" stroke="none" x="3" y="18.000" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.4 Ecological Succession')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="18.000" x2="21" y2="18.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Lesson2.5_Video.html" onclick="markLessonStarted('2', 5)">
    <rect id="u2-l5" stroke="none" x="3" y="14.250" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.5 Niches and Habitat')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="14.250" x2="21" y2="14.250" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Lesson2.6_Video.html" onclick="markLessonStarted('2', 6)">
    <rect id="u2-l6" stroke="none" x="3" y="10.500" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.6 Food Chains, Webs, and Trophic Levels')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="10.500" x2="21" y2="10.500" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Lesson2.7_Video.html" onclick="markLessonStarted('2', 7)">
    <rect id="u2-l7" stroke="none" x="3" y="6.750" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '2.7 Human Impact on Ecosystems')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="6.750" x2="21" y2="6.750" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit2/Unit2_Test_Practice.html" onclick="markLessonStarted('2', 8)">
    <rect id="u2-l8" stroke="none" x="3" y="3.000" width="18" height="3.750" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 2 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 2</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-3" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-3">
<a href="BiologyLessons/Unit3/Lesson3.1_Video.html" onclick="markLessonStarted('3', 1)">
    <rect id="u3-l1" stroke="none" x="3" y="28.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '3.1 Community Ecology')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="28.000" x2="21" y2="28.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit3/Lesson3.2_Video.html" onclick="markLessonStarted('3', 2)">
    <rect id="u3-l2" stroke="none" x="3" y="23.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '3.2 Biomes and Biodiversity')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="23.000" x2="21" y2="23.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit3/Lesson3.3_Video.html" onclick="markLessonStarted('3', 3)">
    <rect id="u3-l3" stroke="none" x="3" y="18.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '3.3 Climate and Weather Patterns')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="18.000" x2="21" y2="18.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit3/Lesson3.4_Video.html" onclick="markLessonStarted('3', 4)">
    <rect id="u3-l4" stroke="none" x="3" y="13.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '3.4 Terrestrial Biomes')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="13.000" x2="21" y2="13.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit3/Lesson3.5_Video.html" onclick="markLessonStarted('3', 5)">
    <rect id="u3-l5" stroke="none" x="3" y="8.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '3.5 Aquatic Ecosystems')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="8.000" x2="21" y2="8.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit3/Unit3_Test_Practice.html" onclick="markLessonStarted('3', 6)">
    <rect id="u3-l6" stroke="none" x="3" y="3.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 3 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 3</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-4" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-4">
<a href="BiologyLessons/Unit4/Lesson4.1_Video.html" onclick="markLessonStarted('4', 1)">
    <rect id="u4-l1" stroke="none" x="3" y="28.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '4.1 History of Evolutionary Thought')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="28.000" x2="21" y2="28.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit4/Lesson4.2_Video.html" onclick="markLessonStarted('4', 2)">
    <rect id="u4-l2" stroke="none" x="3" y="23.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '4.2 Evidence of Evolution')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="23.000" x2="21" y2="23.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit4/Lesson4.3_Video.html" onclick="markLessonStarted('4', 3)">
    <rect id="u4-l3" stroke="none" x="3" y="18.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '4.3 Sources of Genetic Variation')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="18.000" x2="21" y2="18.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit4/Lesson4.5_Video.html" onclick="markLessonStarted('4', 4)">
    <rect id="u4-l4" stroke="none" x="3" y="13.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '4.5 Natural Selection and Adaptation')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="13.000" x2="21" y2="13.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit4/Lesson4.6_Video.html" onclick="markLessonStarted('4', 5)">
    <rect id="u4-l5" stroke="none" x="3" y="8.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '4.6 Population Dynamics')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="8.000" x2="21" y2="8.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit4/Unit4_Test_Practice.html" onclick="markLessonStarted('4', 6)">
    <rect id="u4-l6" stroke="none" x="3" y="3.000" width="18" height="5.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 4 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 4</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-5" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-5">
<a href="BiologyLessons/Unit5/Lesson5.1_Video.html" onclick="markLessonStarted('5', 1)">
    <rect id="u5-l1" stroke="none" x="3" y="27.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '5.1 Taxonomy Basics')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="27.000" x2="21" y2="27.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit5/Lesson5.2_Video.html" onclick="markLessonStarted('5', 2)">
    <rect id="u5-l2" stroke="none" x="3" y="21.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '5.2 Cladistics and Classification')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="21.000" x2="21" y2="21.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit5/Lesson5.3_Video.html" onclick="markLessonStarted('5', 3)">
    <rect id="u5-l3" stroke="none" x="3" y="15.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '5.3 Phylogenetic Trees')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="15.000" x2="21" y2="15.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit5/Lesson5.6_Video.html" onclick="markLessonStarted('5', 4)">
    <rect id="u5-l4" stroke="none" x="3" y="9.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '5.6 Domains and Kingdoms of Life')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="9.000" x2="21" y2="9.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit5/Unit5_Test_Practice.html" onclick="markLessonStarted('5', 5)">
    <rect id="u5-l5" stroke="none" x="3" y="3.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 5 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 5</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-6" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-6">
<a href="BiologyLessons/Unit6/Lesson6.1_Video.html" onclick="markLessonStarted('6', 1)">
    <rect id="u6-l1" stroke="none" x="3" y="28.714" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '6.1 Introduction to Cells')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="28.714" x2="21" y2="28.714" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit6/Lesson6.2_Video.html" onclick="markLessonStarted('6', 2)">
    <rect id="u6-l2" stroke="none" x="3" y="24.428" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '6.2 Prokaryotic vs Eukaryotic Cells')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="24.428" x2="21" y2="24.428" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit6/Lesson6.3_Video.html" onclick="markLessonStarted('6', 3)">
    <rect id="u6-l3" stroke="none" x="3" y="20.142" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '6.3 Organelles and Their Functions')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="20.142" x2="21" y2="20.142" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit6/Lesson6.4_Video.html" onclick="markLessonStarted('6', 4)">
    <rect id="u6-l4" stroke="none" x="3" y="15.856" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '6.4 Membrane Transport')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="15.856" x2="21" y2="15.856" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit6/Lesson6.5_Video.html" onclick="markLessonStarted('6', 5)">
    <rect id="u6-l5" stroke="none" x="3" y="11.570" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '6.5 Cell Communication')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="11.570" x2="21" y2="11.570" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit6/Lesson6.6_Video.html" onclick="markLessonStarted('6', 6)">
    <rect id="u6-l6" stroke="none" x="3" y="7.284" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '6.6 Homeostasis')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="7.284" x2="21" y2="7.284" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit6/Unit6_Test_Practice.html" onclick="markLessonStarted('6', 7)">
    <rect id="u6-l7" stroke="none" x="3" y="2.998" width="18" height="4.286" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 6 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="2.998" x2="21" y2="2.998" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 6</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-7" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-7">
<a href="BiologyLessons/Unit7/Lesson7.1_Video.html" onclick="markLessonStarted('7', 1)">
    <rect id="u7-l1" stroke="none" x="3" y="27.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '7.1 Overview of Cellular Respiration')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="27.000" x2="21" y2="27.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit7/Lesson7.2_Video.html" onclick="markLessonStarted('7', 2)">
    <rect id="u7-l2" stroke="none" x="3" y="21.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '7.2 ATP and Cellular Energy')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="21.000" x2="21" y2="21.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit7/Lesson7.3_Video.html" onclick="markLessonStarted('7', 3)">
    <rect id="u7-l3" stroke="none" x="3" y="15.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '7.3 Glycolysis')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="15.000" x2="21" y2="15.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit7/Lesson7.6_Video.html" onclick="markLessonStarted('7', 4)">
    <rect id="u7-l4" stroke="none" x="3" y="9.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '7.6 Fermentation')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="9.000" x2="21" y2="9.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit7/Unit7_Test_Practice.html" onclick="markLessonStarted('7', 5)">
    <rect id="u7-l5" stroke="none" x="3" y="3.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 7 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 7</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-8" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-8">
<a href="BiologyLessons/Unit8/Lesson8.1_Video.html" onclick="markLessonStarted('8', 1)">
    <rect id="u8-l1" stroke="none" x="3" y="27.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '8.1 Overview of Photosynthesis')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="27.000" x2="21" y2="27.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit8/Lesson8.2_Video.html" onclick="markLessonStarted('8', 2)">
    <rect id="u8-l2" stroke="none" x="3" y="21.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '8.2 Chloroplast Structure')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="21.000" x2="21" y2="21.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit8/Lesson8.3_Video.html" onclick="markLessonStarted('8', 3)">
    <rect id="u8-l3" stroke="none" x="3" y="15.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '8.3 Light-Dependent Reactions')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="15.000" x2="21" y2="15.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit8/Lesson8.5_Video.html" onclick="markLessonStarted('8', 4)">
    <rect id="u8-l4" stroke="none" x="3" y="9.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '8.5 Factors Affecting Photosynthesis')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="9.000" x2="21" y2="9.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit8/Unit8_Test_Practice.html" onclick="markLessonStarted('8', 5)">
    <rect id="u8-l5" stroke="none" x="3" y="3.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 8 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 8</text>
  </svg>
</div>
<div style="position: relative; display: flex; align-items: flex-start; justify-content: center; height: 100%;">
  <svg viewBox="0 0 24 38" fill="none" stroke="currentColor" stroke-width="0.4" stroke-linecap="round" stroke-linejoin="round" style="width: 100%; height: 100%; max-height: 45rem; color: inherit;">
    <!-- Box outline -->
    <rect x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="none" stroke="currentColor" stroke-width="0.5" />
    <!-- Fill background -->
    <rect id="fill-unit-9" x="3" y="3" width="18" height="30" rx="1.5" ry="1.5" fill="#9ca3af" fill-opacity="0.15" stroke="none" />
    <!-- Lesson segments -->
    <g id="segments-unit-9">
<a href="BiologyLessons/Unit9/Lesson9.1_Video.html" onclick="markLessonStarted('9', 1)">
    <rect id="u9-l1" stroke="none" x="3" y="27.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '9.1 Cell Growth and Division')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="27.000" x2="21" y2="27.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit9/Lesson9.2_Video.html" onclick="markLessonStarted('9', 2)">
    <rect id="u9-l2" stroke="none" x="3" y="21.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '9.2 The Cell Cycle')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="21.000" x2="21" y2="21.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit9/Lesson9.3_Video.html" onclick="markLessonStarted('9', 3)">
    <rect id="u9-l3" stroke="none" x="3" y="15.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '9.3 Mitosis')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="15.000" x2="21" y2="15.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit9/Lesson9.4_Video.html" onclick="markLessonStarted('9', 4)">
    <rect id="u9-l4" stroke="none" x="3" y="9.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, '9.4 Cytokinesis')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="9.000" x2="21" y2="9.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
<a href="BiologyLessons/Unit9/Unit9_Test_Practice.html" onclick="markLessonStarted('9', 5)">
    <rect id="u9-l5" stroke="none" x="3" y="3.000" width="18" height="6.000" fill="white" fill-opacity="0" cursor="pointer" pointer-events="auto" onmouseenter="showLessonPopup(event, 'Unit 9 Test')" onmousemove="moveLessonPopup(event)" onmouseleave="hideLessonPopup()"></rect>
</a>
  <line x1="3" y1="3.000" x2="21" y2="3.000" stroke="currentColor" stroke-width="0.08" stroke-opacity="0.3" pointer-events="none" />
    </g>
    <text x="12" y="36" text-anchor="middle" fill="currentColor" stroke="none" font-size="1.8" font-family="ui-sans-serif, system-ui, sans-serif" font-weight="600" style="pointer-events: none;">Unit 9</text>
  </svg>
</div>

      </div>

    </div>
  </main>

    <style>
      #lesson-tooltip {
          position: fixed;
          background: rgba(15, 23, 42, 0.95);
          backdrop-filter: blur(12px);
          color: #f1f5f9;
          padding: 0.75rem 1.25rem;
          border-radius: 0.75rem;
          font-size: 0.95rem;
          font-weight: 600;
          pointer-events: none;
          z-index: 10000;
          opacity: 0;
          transition: opacity 0.15s ease;
          border: 1px solid rgba(255, 255, 255, 0.15);
          box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
          white-space: nowrap;
      }
      #lesson-tooltip.visible {
          opacity: 1;
      }
      /* Hover interactions & Transitions */
      rect[id^="u"], path[id^="u"] {
          transform-box: fill-box;
          transform-origin: center;
          transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.2s ease, stroke-width 0.2s ease;
      }
      .segment-hover {
          transform: scale(1.05);
          filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.9));
          fill-opacity: 0.15;
      }

      /* Starred Lesson Glow & Animation */
      @keyframes star-pulse {
        0%, 100% { stroke-opacity: 0.8; stroke-width: 0.12; filter: drop-shadow(0 0 2px #22c55e); }
        50% { stroke-opacity: 1; stroke-width: 0.25; filter: drop-shadow(0 0 6px #16a34a); }
      }
      .starred-lesson-glow {
        stroke: #86efac !important;
        stroke-dasharray: 0.3, 0.1;
        animation: star-pulse 1.5s infinite ease-in-out;
      }
      @keyframes star-twinkle {
          0%, 100% { opacity: 0.4; transform: scale(0.8); }
          50% { opacity: 1; transform: scale(1.3); }
      }
      .star-icon {
          animation: star-twinkle 2s infinite ease-in-out;
          font-family: inherit;
          pointer-events: none;
          transform-box: fill-box;
          transform-origin: center;
          font-size: 0.6px;
          user-select: none;
      }
  </style>

  <div id="lesson-tooltip"></div>
  
  <script>
    const tooltip = document.getElementById('lesson-tooltip');

    function showLessonPopup(e, title) {
      if(!title) return;
      let displayText = title;
      const target = e.target;
      
      if (target && target.id && target.id.match(/^u[\w]+-l\d+$/)) {
          target.classList.add('segment-hover');
      }

      // Get the correct translation dictionary based on current language
      const lang = localStorage.getItem("arisEduLanguage");
      const isChinese = (lang === "chinese" || lang === "traditional");
      
      // Get proper translation dict based on language
      let t = null;
      if (lang === 'spanish') {
          t = window.arisEduSpanishTranslations || window.spanishTranslations;
      } else if (lang === 'hindi') {
          t = window.arisEduHindiTranslations || window.hindiTranslations;
      } else if (isChinese) {
          t = window.arisEduTranslations;
      }

      const isFirstAttempt = !window._popupDebugLogged || window._popupDebugLogged !== title;
      if (isFirstAttempt && t && lang !== 'english') {
          window._popupDebugLogged = title;
          console.log(`[Popup Debug] Title: "${title}", Lang: ${lang}, Dict loaded: ${!!t}`);
      }

      if (t && lang !== 'english') {
          // Try direct lookup first
          if (t[displayText]) {
              displayText = t[displayText];
              if (isFirstAttempt) console.log(`[Popup] Direct match found: ${title}`);
          } else {
              // Extract title part (e.g., "12.2 DNA Replication" -> "DNA Replication")
              const match = displayText.match(/^(\d+\.\d+)\s+(.+)$/);
              if (match) {
                  const lessonNum = match[1]; // "1.6"
                  const coreTitle = match[2]; // "Applications of Linear Systems"
                  
                  // Try with lesson prefix format
                  const lessonKey = "Lesson " + lessonNum + ": " + coreTitle;
                  if (t[lessonKey]) {
                      displayText = t[lessonKey];
                      if (isFirstAttempt) console.log(`[Popup] Lesson key match: ${lessonKey}`);
                  } else if (t[coreTitle]) {
                      // Try just core title
                      displayText = t[coreTitle];
                      if (isFirstAttempt) console.log(`[Popup] Core title match: ${coreTitle}`);
                  } else {
                      if (isFirstAttempt) console.log(`[Popup] NO MATCH for: ${title} (tried: "${lessonKey}")`);
                  }
              }
          }
          if (isChinese && lang === "traditional" && window.convertToTraditional) {
              displayText = window.convertToTraditional(displayText);
          }
      }

      // Check Progress & add status prefix
      if(target) {
           const fill = target.getAttribute('fill');
           if (fill === '#16a34a' || fill === '#16A34A') {
                if (t && lang !== 'english') {
                    let status = t["COMPLETED"] || "COMPLETED";
                    if (isChinese && lang === "traditional" && window.convertToTraditional) status = window.convertToTraditional(status);
                    displayText = status + " \u2714 " + displayText;
                } else {
                    displayText = "COMPLETED \u2714 " + displayText;
                }
           } else if (fill === '#f97316' || fill === '#F97316') {
                if (t && lang !== 'english') {
                    let status = t["IN PROGRESS"] || "IN PROGRESS";
                    if (isChinese && lang === "traditional" && window.convertToTraditional) status = window.convertToTraditional(status);
                    displayText = status + " " + displayText;
                } else {
                    displayText = "IN PROGRESS " + displayText;
                }
           }
      }

      tooltip.textContent = displayText;
      tooltip.classList.add('visible');
      moveLessonPopup(e);
    }

    function moveLessonPopup(e) {
      if (!tooltip.classList.contains('visible')) return;
      const offset = 15;
      let x = e.clientX + offset;
      let y = e.clientY + offset;
      
      const rect = tooltip.getBoundingClientRect();
      const winW = window.innerWidth;
      const winH = window.innerHeight;
      
      if (x + rect.width > winW) x = e.clientX - rect.width - offset;
      if (y + rect.height > winH) y = e.clientY - rect.height - offset;
      
      tooltip.style.left = x + 'px';
      tooltip.style.top = y + 'px';
    }

    function hideLessonPopup() {
      tooltip.classList.remove('visible');
      document.querySelectorAll('.segment-hover').forEach(el => el.classList.remove('segment-hover'));
    }

    function markLessonStarted(unit, lesson) {
      const startedKey = `ms_bio_u${unit}_l${lesson}_started`;
      const completedKey = `ms_bio_u${unit}_l${lesson}_completed`;
      
      // Only mark as started if not already completed
      if (localStorage.getItem(completedKey) !== 'true') {
        localStorage.setItem(startedKey, 'true');
      }
    }

    function applyProgressColors() {
        // Iterate localStorage keys to find all progress entries for Biology
        const progressMap = {};
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (!key || !key.startsWith('ms_bio_u')) continue;
          const match = key.match(/^ms_bio_u(.+)_l(\d+)_(started|completed)$/);
          if (!match) continue;
          const u = match[1], l = match[2], type = match[3];
          const mapKey = `${u}_${l}`;
          if (!progressMap[mapKey]) progressMap[mapKey] = { unit: u, lesson: l };
          if (localStorage.getItem(key) === 'true') progressMap[mapKey][type] = true;
        }

        // Apply colors
        for (const mapKey in progressMap) {
          const { unit, lesson, started, completed } = progressMap[mapKey];
          const elementId = `u${unit}-l${lesson}`;
          const el = document.getElementById(elementId);
          if(el) {
              if (completed) {
                el.setAttribute('fill', '#16a34a'); // Green
                el.setAttribute('fill-opacity', '0.7');
              } else if (started) {
                el.setAttribute('fill', '#f97316'); // Orange
                el.setAttribute('fill-opacity', '0.6');
              }
          }
        }
    }

    function addStarEffects() {
        const lessons = document.querySelectorAll('rect');
        lessons.forEach(el => {
            const onmouseenter = el.getAttribute('onmouseenter');
            if (onmouseenter && onmouseenter.includes('⭐')) {
                if (!el.id || !el.id.startsWith('u')) return;

                el.classList.add('starred-lesson-glow');

                const x = parseFloat(el.getAttribute('x'));
                const y = parseFloat(el.getAttribute('y'));
                const w = parseFloat(el.getAttribute('width'));
                const h = parseFloat(el.getAttribute('height'));

                if (!isNaN(x) && !isNaN(y) && !isNaN(w) && !isNaN(h)) {
                    const positions = [
                        { cx: x + w - 1.0, cy: y + 0.5, delay: '0.2s' },
                        { cx: x + 1.0, cy: y + h - 0.5, delay: '1.2s' }
                    ];

                    positions.forEach(pos => {
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.textContent = '✨';
                        text.setAttribute('x', pos.cx);
                        text.setAttribute('y', pos.cy);
                        text.setAttribute('text-anchor', 'middle');
                        text.setAttribute('dominant-baseline', 'middle');
                        text.classList.add('star-icon');
                        text.style.animationDelay = pos.delay;
                        
                        if (el.parentNode) {
                             el.parentNode.insertBefore(text, el.nextSibling);
                        }
                    });
                }
            }
        });
    }

    function clearAllProgress() {
        const keysToRemove = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key && key.startsWith('ms_bio_u')) {
            keysToRemove.push(key);
          }
        }
        keysToRemove.forEach(k => localStorage.removeItem(k));
        
        // Reset colors
        document.querySelectorAll('rect[id^="u"], path[id^="u"]').forEach(seg => {
            seg.setAttribute('fill', 'white');
            seg.setAttribute('fill-opacity', '0');
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        applyProgressColors();
        addStarEffects();
        
        if (window._isDevUser && window._isDevUser()) {
            const dcb = document.getElementById('dev-clear-btn');
            if (dcb) dcb.style.display = '';
        }
    });
  </script>


    
    <!-- ArisEdu Global Search -->
    <!-- The translation script is now included in the head for earlier execution -->
    <script src="../search_data.js"></script>

        <script src="../search_logic.js"></script>
    <script src="scripts/dev_tools.js"></script>

</body>
</html>
